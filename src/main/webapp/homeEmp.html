<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Employee</title>
</head>
<body>
    Employee<br/>
    
    Submit Request<br/>
    <form action="AddReimbursementServlet" method="GET">
    	Amount: <input type="number" step="0.01" name = "amount" required /> <br/>
    	Purpose: <input type="text" name = "purpose" required /> <br/>
    	Submitted Date: <input type="date" name = "date" required /> <br/>
    	Employee Number: <input type="number" name = "id" required /> <br/>
		<button type="submit" onclick = "submitted">Submit</button> <br/>
	</form>
	View All Requests <br/>
	<table id="requestsTbl" border="1">
       <thead><tr><th>Request ID</th><th>Ammount</th><th>Purpose</th><th>Submitted Date</th><th>Employee Number</th></tr></thead>
       <tbody>
       		
       </tbody>
	</table>
	<script>
	 	console.log('JavaScript block'); 
    	function submitted()
    	{
    		alert("New Request Created");
    	}
	</script>
	<form>
    	Employee Number: <input type="number" name = "id" required /> <br/>
		<button type="submit" onclick = "loadUsers()">Submit</button> <br/>
	</form>
	
	<script>        
          console.log('JavaScript block');

          function loadUsers(){
              console.log('loadUsers');
              var url = "http://localhost:8080/Reimbursement2/ListSpecificServlet";
              ajaxGET(url).then(function (response) {
                  console.log(response);
                  var products = JSON.parse(response);
                  console.log(products.length);
                  var tbody = "";
                  
                  
                  for(var i=0; i<products.length;i++){
                      var productObj = products[i];
                      tbody += "<tr>";
                      tbody += "<td>"+productObj.employeeId+"</td>";
                      tbody += "<td>"+productObj.employeeType+"</td>";
                      tbody += "<td>"+productObj.firstname+"</td>";
                      tbody += "<td>"+productObj.lastname+"</td>";
                      tbody += "<td>"+productObj.email+"</td>";
                      tbody += "<td>"+productObj.address+"</td>";
                      tbody += "<td>"+productObj.startDate+"</td>";
                      tbody += "</tr>";
                  }
                  console.log(tbody);
                  document.querySelector("#AccountsTbl>tbody").innerHTML= tbody;
                  

              });
          }
  </script>
	
	<div id="users">
	   <table id="accountTbl" border="1">
	       <thead><tr><th>Emp ID</th><th>Type</th><th>Firstname</th><th>Lastname</th><th>Email</th><th>Adress</th><th>Startdate</th></tr></thead>
	       <tbody>
	       		
	       </tbody>
	   </table>
    </div>
    <form action="UpdateUserServlet" method="GET">
    	ID Number: <input type="number" name = "id" required /> <br/>
    	Firstname: <input type="text" name = "firstname" required /> <br/>
    	Lastname: <input type="text" name = "lastname" required /> <br/>
		Email: <input type="email" name="email" required /> <br/>
		Password: <input type="password" name="password" required /> <br/>
		Address: <input type="text" name = "address" required /> <br/>
		Startdate: <input type="date" name = "startdate" required /> <br/>
		
		<button type="submit">UPDATE</button> <br/>
	</form>
	
	<a href = "LogoutServlet">Logout</a>
</body>
</html>